"use strict";(()=>{var e={};e.id=6515,e.ids=[6515],e.modules={53524:e=>{e.exports=require("@prisma/client")},98432:e=>{e.exports=require("bcryptjs")},60614:e=>{e.exports=require("next-auth/jwt")},62113:e=>{e.exports=require("next-auth/next")},47449:e=>{e.exports=require("next-auth/providers/credentials")},41649:e=>{e.exports=require("next-auth/react")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},69381:(e,r,t)=>{t.r(r),t.d(r,{config:()=>d,default:()=>p,routeModule:()=>f});var o={};t.r(o),t.d(o,{default:()=>u});var a=t(71802),s=t(47153),i=t(56249),n=t(66826),l=t(44507);let c=async(e,r,t)=>{console.log("API: MasterDefects filters auth session validated, user:",t?.user?.name);try{if(console.log("[PRISMA_DB] MasterDefects Filters API called"),"GET"===e.method)try{console.log("[PRISMA_DB] Fetching unique filter options for master defects");let e=await l.Z.masterDefect.findMany({select:{category:!0},where:{category:{not:null}},distinct:["category"]}),t=await l.Z.masterDefect.findMany({select:{applicableOperation:!0},where:{applicableOperation:{not:null}},distinct:["applicableOperation"]}),o=e.map(e=>e.category).filter(Boolean).sort(),a=t.map(e=>e.applicableOperation).filter(Boolean).sort();return console.log(`[PRISMA_DB] Found ${o.length} unique categories and ${a.length} unique operations`),r.status(200).json({categories:o,operations:a})}catch(e){return console.error("[PRISMA_DB] Error fetching filter options:",e),console.error("[PRISMA_DB] MasterDefect filters error details:",JSON.stringify(e,Object.getOwnPropertyNames(e))),r.status(500).json({error:"Failed to fetch filter options"})}return r.status(405).json({error:"Method not allowed"})}catch(e){return console.error("API auth error:",e),r.status(500).json({error:"Internal server error"})}},u=(0,n.QO)(c),p=(0,i.l)(o,"default"),d=(0,i.l)(o,"config"),f=new a.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/master-defects/filters",pathname:"/api/master-defects/filters",bundlePath:"",filename:""},userland:o})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[549],()=>t(69381));module.exports=o})();