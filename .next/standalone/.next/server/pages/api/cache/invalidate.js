"use strict";(()=>{var e={};e.id=6824,e.ids=[6824],e.modules={53524:e=>{e.exports=require("@prisma/client")},98432:e=>{e.exports=require("bcryptjs")},60614:e=>{e.exports=require("next-auth/jwt")},62113:e=>{e.exports=require("next-auth/next")},47449:e=>{e.exports=require("next-auth/providers/credentials")},41649:e=>{e.exports=require("next-auth/react")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},71471:(e,r,t)=>{t.r(r),t.d(r,{config:()=>h,default:()=>p,routeModule:()=>f});var a={};t.r(a),t.d(a,{default:()=>c,isCacheInvalidated:()=>u});var o=t(71802),s=t(47153),i=t(56249),n=t(66826);let d=new Map;async function l(e,r,t){if(console.log("Cache invalidation API called"),"POST"!==e.method)return r.setHeader("Allow",["POST"]),r.status(405).json({error:`Method ${e.method} Not Allowed`});try{let{type:a,poNumber:o,operationId:s}="string"==typeof e.body?JSON.parse(e.body):e.body;if(!a||!o)return r.status(400).json({error:"Missing required fields"});if(!t?.user?.id)return r.status(401).json({error:"Unauthorized - User not authenticated"});let i=`${a}:${o}`;return s&&(i+=`:${s}`),d.set(i,new Date),console.log(`Cache invalidation request received for key: ${i}`),console.log(`Cache invalidation timestamp: ${d.get(i)}`),console.log(`Active cache keys: ${Array.from(d.keys()).join(", ")}`),r.status(200).json({success:!0,message:`Cache invalidated for key: ${i}`,timestamp:d.get(i)})}catch(e){return console.error("Error processing cache invalidation:",e),r.status(500).json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"})}}function u(e,r){let t=d.get(e);return!!t&&t>r}let c=(0,n.QO)(l),p=(0,i.l)(a,"default"),h=(0,i.l)(a,"config"),f=new o.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/cache/invalidate",pathname:"/api/cache/invalidate",bundlePath:"",filename:""},userland:a})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[549],()=>t(71471));module.exports=a})();