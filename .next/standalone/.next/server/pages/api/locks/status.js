"use strict";(()=>{var e={};e.id=9552,e.ids=[9552],e.modules={53524:e=>{e.exports=require("@prisma/client")},98432:e=>{e.exports=require("bcryptjs")},60614:e=>{e.exports=require("next-auth/jwt")},62113:e=>{e.exports=require("next-auth/next")},47449:e=>{e.exports=require("next-auth/providers/credentials")},41649:e=>{e.exports=require("next-auth/react")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},32512:(e,r,t)=>{t.r(r),t.d(r,{config:()=>p,default:()=>l,routeModule:()=>f});var s={};t.r(s),t.d(s,{default:()=>c});var o=t(71802),u=t(47153),n=t(56249),i=t(66826),d=t(44507);async function a(e,r,t){if("GET"!==e.method)return r.status(405).json({error:"Method not allowed"});try{let{resourceType:s,resourceId:o}=e.query,u=t?.user;if(console.log(`Lock status check for ${s}:${o} by user ${u?.name} (${u?.id})`),!s||!o)return r.status(400).json({success:!1,error:"Resource type and ID are required"});if(!u||!u.id)return r.status(401).json({success:!1,error:"User not authenticated"});if("productionOrder"!==s)return r.status(400).json({success:!1,error:"Unsupported resource type"});let n=await d.Z.productionOrder.findUnique({where:{poNumber:o},select:{id:!0,editingUserId:!0,editingUserName:!0,lockedAt:!0}});if(!n)return r.status(404).json({success:!1,error:"Resource not found"});let i=u?parseInt(u.id):null,a=null!==n.editingUserId&&null!==n.lockedAt,c=a&&n.editingUserId===i;return console.log(`Lock status for ${s}:${o}:`,{isLocked:a,isOwner:c,lockInfo:a?{userId:n.editingUserId,userName:n.editingUserName,lockedAt:n.lockedAt}:null}),r.status(200).json({isLocked:a,isOwner:c,lockInfo:a?{userId:n.editingUserId,userName:n.editingUserName,lockedAt:n.lockedAt}:null})}catch(e){return console.error("Error checking lock status:",e),r.status(500).json({success:!1,error:"Failed to check lock status"})}}let c=(0,i.QO)(a),l=(0,n.l)(s,"default"),p=(0,n.l)(s,"config"),f=new o.PagesAPIRouteModule({definition:{kind:u.x.PAGES_API,page:"/api/locks/status",pathname:"/api/locks/status",bundlePath:"",filename:""},userland:s})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[549],()=>t(32512));module.exports=s})();