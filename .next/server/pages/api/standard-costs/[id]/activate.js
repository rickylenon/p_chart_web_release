"use strict";(()=>{var t={};t.id=7897,t.ids=[7897],t.modules={53524:t=>{t.exports=require("@prisma/client")},98432:t=>{t.exports=require("bcryptjs")},60614:t=>{t.exports=require("next-auth/jwt")},62113:t=>{t.exports=require("next-auth/next")},47449:t=>{t.exports=require("next-auth/providers/credentials")},41649:t=>{t.exports=require("next-auth/react")},20145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},8631:(t,e,r)=>{r.r(e),r.d(e,{config:()=>l,default:()=>c,routeModule:()=>p});var a={};r.r(a),r.d(a,{default:()=>u});var s=r(71802),o=r(47153),n=r(56249),i=r(44507);async function d(t,e,r){try{console.log("API: StandardCosts activate auth session validated, user:",r?.user?.name);let{id:a}=t.query,s=parseInt(a,10);if(isNaN(s))return e.status(400).json({error:"Invalid standard cost ID"});let o=r?.user?.role||"";if("admin"!==o.toLowerCase())return e.status(403).json({error:"Admin access required"});if("PUT"===t.method)try{console.log(`Activating standard cost with ID: ${s}`);let t=await i.Z.standardCost.findUnique({where:{id:s}});if(!t)return e.status(404).json({error:"Standard cost not found"});if(t.isActive)return e.status(400).json({error:"Standard cost is already active"});let a=r?.user?.id?parseInt(r.user.id):null,o=await i.Z.standardCost.update({where:{id:s},data:{isActive:!0,updatedById:a}});console.log(`Activated standard cost with ID: ${s}`);let n={...o,costPerUnit:Number(o.costPerUnit)};return e.status(200).json({message:"Standard cost activated successfully",standardCost:n})}catch(t){return console.error("Error activating standard cost:",t),e.status(500).json({error:"Failed to activate standard cost",details:t instanceof Error?t.message:"Unknown error"})}return e.status(405).json({error:"Method not allowed"})}catch(t){return console.error("Error in activate handler:",t),e.status(500).json({error:"Failed to process request"})}}let u=(0,r(66826).QO)(d),c=(0,n.l)(a,"default"),l=(0,n.l)(a,"config"),p=new s.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/standard-costs/[id]/activate",pathname:"/api/standard-costs/[id]/activate",bundlePath:"",filename:""},userland:a})}};var e=require("../../../../webpack-api-runtime.js");e.C(t);var r=t=>e(e.s=t),a=e.X(0,[549],()=>r(8631));module.exports=a})();