"use strict";(()=>{var e={};e.id=7209,e.ids=[7209,2888,660],e.modules={45977:(e,t,r)=>{r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(84297).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},90470:(e,t,r)=>{r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(84297).Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},13718:(e,t,r)=>{r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(84297).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},62916:(e,t,r)=>{r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(84297).Z)("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]])},7783:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>h,default:()=>m,getServerSideProps:()=>x,getStaticPaths:()=>p,getStaticProps:()=>g,reportWebVitals:()=>y,routeModule:()=>k,unstable_getServerProps:()=>N,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>f});var s=r(87093),o=r(35244),i=r(1323),l=r(91777),n=r.n(l),d=r(65143),c=r(50357),u=e([d,c]);[d,c]=u.then?(await u)():u;let m=(0,i.l)(c,"default"),g=(0,i.l)(c,"getStaticProps"),p=(0,i.l)(c,"getStaticPaths"),x=(0,i.l)(c,"getServerSideProps"),h=(0,i.l)(c,"config"),y=(0,i.l)(c,"reportWebVitals"),f=(0,i.l)(c,"unstable_getStaticProps"),b=(0,i.l)(c,"unstable_getStaticPaths"),j=(0,i.l)(c,"unstable_getStaticParams"),N=(0,i.l)(c,"unstable_getServerProps"),v=(0,i.l)(c,"unstable_getServerSideProps"),k=new s.PagesRouteModule({definition:{kind:o.x.PAGES,page:"/production-orders",pathname:"/production-orders",bundlePath:"",filename:""},components:{App:d.default,Document:n()},userland:c});a()}catch(e){a(e)}})},25998:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{w:()=>u});var s=r(20997),o=r(16689),i=r(21989),l=r(87249),n=r(61932),d=e([i,l]);function c({currentPage:e,totalPages:t,totalItems:r,itemsPerPage:a,onPageChange:o,onItemsPerPageChange:i}){return console.log(`Rendering pagination: Page ${e} of ${t}, showing ${a} items per page`),(0,s.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",0===r?0:(e-1)*a+1," to"," ",Math.min(e*a,r)," of ",r," items"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[i&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Show per page"}),s.jsx("select",{value:a,onChange:e=>i(Number(e.target.value)),className:"border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 rounded p-1 text-sm","aria-label":"Items per page",children:[10,20,50,100].map(e=>s.jsx("option",{value:e,className:"dark:bg-gray-800",children:e},e))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(l.z,{variant:"outline",size:"sm",onClick:()=>o(1),disabled:e<=1,className:"dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700",children:"\xab"}),s.jsx(l.z,{variant:"outline",size:"sm",onClick:()=>o(e-1),disabled:e<=1,className:"dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700",children:"Previous"}),(0,s.jsxs)("div",{className:"mx-2 text-sm text-gray-600 dark:text-gray-400",children:["Page ",e," of ",t]}),s.jsx(l.z,{variant:"outline",size:"sm",onClick:()=>o(e+1),disabled:e>=t,className:"dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700",children:"Next"}),s.jsx(l.z,{variant:"outline",size:"sm",onClick:()=>o(t),disabled:e>=t,className:"dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700",children:"\xbb"})]})]})]})}function u({data:e,columns:t,keyField:r,isLoading:a=!1,error:l,searchValue:d,onSearchChange:u,searchPlaceholder:m="Search...",pagination:g,sortField:p,sortDirection:x="asc",onSortChange:h,emptyMessage:y="No results found.",className:f="",hideSearch:b=!1}){let[j,N]=(0,o.useState)(""),[v,k]=(0,o.useState)(1),[w,S]=(0,o.useState)(10),[P,C]=(0,o.useState)(void 0),[D,U]=(0,o.useState)("asc"),z=void 0!==u,R=void 0!==g,$=void 0!==h,q=z?d||"":j,I=$?p:P,A=$?x:D,O=e=>{P===e?U("asc"===D?"desc":"asc"):(C(e),U("asc"))},M=e=>{h&&(p===e?h(e,"asc"===x?"desc":"asc"):h(e,"asc"))},L=[...e];if(!z&&q){let e=q.toLowerCase(),r=t.filter(e=>!1!==e.searchable).map(e=>e.key);L=L.filter(t=>r.some(r=>{let a=t[r];return null!=a&&String(a).toLowerCase().includes(e)}))}!$&&I&&L.sort((e,t)=>{let r=e[I],a=t[I];return r===a?0:null==r?"asc"===A?-1:1:null==a?"asc"===A?1:-1:"string"==typeof r&&"string"==typeof a?"asc"===A?r.localeCompare(a):a.localeCompare(r):"asc"===A?r>a?1:-1:r>a?-1:1});let E=L,T=L.length;if(!R){let e=(v-1)*w;E=L.slice(e,e+w)}let Z=e=>I&&I===e?s.jsx("span",{className:"ml-1 inline-block",children:"asc"===A?"▲":"▼"}):null,_=e=>{$?M(e):O(e)};return(0,s.jsxs)("div",{className:`w-full ${f}`,children:[l&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-4 rounded mb-4",children:l}),a?s.jsx("div",{className:"flex justify-center items-center py-20",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 dark:border-purple-400"})}):s.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:(0,s.jsxs)(i.iA,{children:[s.jsx(i.xD,{children:s.jsx(i.SC,{className:"dark:hover:bg-gray-700/50",children:t.map(e=>s.jsx(i.ss,{className:`${e.sortable?"cursor-pointer":""} dark:text-gray-200`,onClick:e.sortable?()=>_(e.key):void 0,children:(0,s.jsxs)("div",{className:"flex items-center",children:[e.header,e.sortable&&(I===e.key?Z(e.key):s.jsx(n.Z,{className:"ml-1 h-4 w-4 opacity-30"}))]})},e.key))})}),s.jsx(i.RM,{children:0===(R?e:E).length?s.jsx(i.SC,{children:s.jsx(i.pj,{colSpan:t.length,className:"h-24 text-center text-gray-500 dark:text-gray-400",children:y})}):(R?e:E).map(e=>s.jsx(i.SC,{className:"dark:hover:bg-gray-700/50",children:t.map(t=>s.jsx(i.pj,{className:"dark:text-gray-200",children:t.render?t.render(e):e[t.key]},`${String(e[r])}-${t.key}`))},String(e[r])))})]})}),(!!R||T>0)&&!a&&s.jsx(c,{...R?g:{currentPage:v,totalPages:Math.ceil(T/w),totalItems:T,itemsPerPage:w,onPageChange:k,onItemsPerPageChange:S}})]})}[i,l]=d.then?(await d)():d,a()}catch(e){a(e)}})},917:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{OL:()=>f,_T:()=>g,aR:()=>c,f$:()=>h,fY:()=>p,le:()=>b,xo:()=>x,yT:()=>y});var s=r(20997),o=r(16689),i=r(32131),l=r(32676),n=r(87249),d=e([i,l,n]);[i,l,n]=d.then?(await d)():d;let c=o.forwardRef(({children:e,...t},r)=>s.jsx(i.Root,{...t,children:e}));c.displayName="AlertDialog",o.forwardRef(({children:e,...t},r)=>s.jsx(i.Trigger,{...t,ref:r,children:e})).displayName="AlertDialogTrigger";let u=({children:e,...t})=>s.jsx(i.Portal,{...t,children:s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:e})});u.displayName="AlertDialogPortal";let m=o.forwardRef(({className:e,...t},r)=>s.jsx(i.Overlay,{className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));m.displayName="AlertDialogOverlay";let g=o.forwardRef(({className:e,...t},r)=>(0,s.jsxs)(u,{children:[s.jsx(m,{}),s.jsx(i.Content,{ref:r,className:(0,l.cn)("fixed z-50 grid w-full max-w-lg scale-100 gap-4 border bg-background p-6 opacity-100 shadow-lg animate-in fade-in-0 slide-in-from-bottom-10 sm:rounded-lg sm:zoom-in-90 sm:slide-in-from-bottom-0 md:w-full",e),...t})]}));g.displayName="AlertDialogContent";let p=({className:e,...t})=>s.jsx("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});p.displayName="AlertDialogHeader";let x=({className:e,...t})=>s.jsx("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});x.displayName="AlertDialogFooter";let h=o.forwardRef(({className:e,...t},r)=>s.jsx(i.Title,{ref:r,className:(0,l.cn)("text-lg font-semibold",e),...t}));h.displayName="AlertDialogTitle";let y=o.forwardRef(({className:e,...t},r)=>s.jsx(i.Description,{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));y.displayName="AlertDialogDescription";let f=o.forwardRef(({className:e,...t},r)=>s.jsx(i.Action,{ref:r,className:(0,l.cn)((0,n.d)(),e),...t}));f.displayName="AlertDialogAction";let b=o.forwardRef(({className:e,...t},r)=>s.jsx(i.Cancel,{ref:r,className:(0,l.cn)((0,n.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));b.displayName="AlertDialogCancel",a()}catch(e){a(e)}})},21989:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{RM:()=>d,SC:()=>c,iA:()=>l,pj:()=>m,ss:()=>u,xD:()=>n});var s=r(20997);r(16689);var o=r(32676),i=e([o]);function l({className:e,...t}){return s.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:s.jsx("table",{"data-slot":"table",className:(0,o.cn)("w-full caption-bottom text-sm",e),...t})})}function n({className:e,...t}){return s.jsx("thead",{"data-slot":"table-header",className:(0,o.cn)("[&_tr]:border-b",e),...t})}function d({className:e,...t}){return s.jsx("tbody",{"data-slot":"table-body",className:(0,o.cn)("[&_tr:last-child]:border-0",e),...t})}function c({className:e,...t}){return s.jsx("tr",{"data-slot":"table-row",className:(0,o.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function u({className:e,...t}){return s.jsx("th",{"data-slot":"table-head",className:(0,o.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function m({className:e,...t}){return s.jsx("td",{"data-slot":"table-cell",className:(0,o.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}o=(i.then?(await i)():i)[0],a()}catch(e){a(e)}})},26331:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{_v:()=>m,aJ:()=>u,pn:()=>d,u:()=>c});var s=r(20997),o=r(16689),i=r(66704),l=r(32676),n=e([i,l]);[i,l]=n.then?(await n)():n;let d=i.Provider,c=i.Root,u=i.Trigger,m=o.forwardRef(({className:e,sideOffset:t=4,...r},a)=>s.jsx(i.Content,{ref:a,sideOffset:t,className:(0,l.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));m.displayName=i.Content.displayName,a()}catch(e){a(e)}})},19094:(e,t,r)=>{r.d(t,{N:()=>s});var a=r(16689);function s(e,t){let[r,s]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let r=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}},50357:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>S,getServerSideProps:()=>P});var s=r(20997),o=r(16689),i=r(87249),l=r(85263),n=r(11163),d=r(45847),c=r(40968),u=r.n(c),m=r(19094),g=r(17344),p=r(65050),x=r(33566),h=r(25998),y=r(90470),f=r(45977),b=r(62916),j=r(13718),N=r(26331),v=r(917),k=r(87942),w=e([i,d,x,h,N,v]);function S({userData:e}){let{toast:t}=(0,p.pm)(),r=(0,n.useRouter)(),[a,c]=(0,o.useState)(""),k=(0,m.N)(a,300),[w,S]=(0,o.useState)([]),[P,C]=(0,o.useState)(!0),[D,U]=(0,o.useState)(null),[z,R]=(0,o.useState)(1),[$,q]=(0,o.useState)(10),[I,A]=(0,o.useState)(0),[O,M]=(0,o.useState)(1),{getAuthHeaders:L}=(0,g.a)(),[E,T]=(0,o.useState)(e?parseInt(e.id):null),[Z,_]=(0,o.useState)(!1),[F,V]=(0,o.useState)(void 0),[J,W]=(0,o.useState)("asc"),[H,X]=(0,o.useState)(!1),[Y,B]=(0,o.useState)(null),[G,Q]=(0,o.useState)(!1),[K,ee]=(0,o.useState)(!1),et=e=>{try{localStorage.setItem("productionOrdersUrl",JSON.stringify(e)),console.log("Saved URL parameters to localStorage:",e)}catch(e){console.error("Error saving to localStorage:",e)}},er=()=>{try{let e=localStorage.getItem("productionOrdersUrl");if(e){let t=JSON.parse(e);return console.log("Loaded URL parameters from localStorage:",t),t}}catch(e){console.error("Error loading from localStorage:",e)}return null};(0,o.useEffect)(()=>{if(r.isReady&&!K){let{page:e,limit:t,search:a,sortField:s,sortDirection:o}=r.query;if(console.log("Initializing state from URL:",r.query),0===Object.keys(r.query).length){let e=er();e&&Object.keys(e).length>0?(console.log("Using saved parameters from localStorage"),e.page&&R(Number(e.page)),e.limit&&q(Number(e.limit)),e.search&&c(String(e.search)),e.sortField&&V(String(e.sortField)),e.sortDirection&&W(e.sortDirection),r.replace({pathname:r.pathname,query:e},void 0,{shallow:!0})):console.log("No saved parameters found or localStorage empty - using defaults for new browser session")}else e&&R(Number(e)),t&&q(Number(t)),a&&c(String(a)),s&&V(String(s)),o&&W(o);ee(!0)}},[r.isReady,r.query,K]),(0,o.useEffect)(()=>{if(r.isReady&&K){let e={};z>1&&(e.page=String(z)),10!==$&&(e.limit=String($)),a&&(e.search=a),F&&(e.sortField=F,e.sortDirection=J),console.log("Updating URL with query:",e),et(e),Object.keys(e).length>0&&r.replace({pathname:r.pathname,query:e},void 0,{shallow:!0})}},[r.isReady,z,$,a,F,J,K]),(0,o.useEffect)(()=>{if(e){let t=(e.role||"").toUpperCase();console.log("Setting admin status based on role:",t),_("ADMIN"===t)}},[e]),(0,o.useEffect)(()=>{console.log("User data:",e),console.log("User role:",e?.role),console.log("isAdmin:",Z),console.log("currentUserId:",E)},[e,Z,E]),(0,o.useEffect)(()=>{(async()=>{if(!K||!e){console.log("Skipping fetch - not initialized or no user data");return}try{C(!0),U(null);let e=L(),t=`/api/production-orders?page=${z}&limit=${$}`;k&&(t+=`&search=${encodeURIComponent(k)}`),F&&(t+=`&sortField=${encodeURIComponent(F)}&sortDirection=${J}`),console.log("Fetching orders with URL:",t);let r=await fetch(t,{headers:e});if(!r.ok)throw Error("Failed to fetch production orders");let a=await r.json();console.log("Fetched orders data:",a),S(a.orders),A(a.pagination.total),M(a.pagination.totalPages)}catch(r){let e=r instanceof Error?r.message:"An error occurred";U(e),t({title:"Error",description:e,variant:"destructive"})}finally{C(!1)}})()},[z,$,k,e,L,t,F,J,Z,K]);let ea=(e,t)=>{let r=`OP${t}`,a=e.operations.find(e=>e.operation===r);return a?a.endTime?"bg-green-500":a.startTime?"bg-blue-500":"bg-gray-400":"bg-gray-300"},es=async()=>{if(Y)try{if(Q(!0),!(await fetch(`/api/production-orders/${Y.poNumber}`,{method:"DELETE",headers:L()})).ok)throw Error("Failed to delete production order");t({title:"Success",description:`Production order ${Y.poNumber} has been deleted.`}),S(e=>e.filter(e=>e.poNumber!==Y.poNumber)),X(!1),B(null)}catch(r){let e=r instanceof Error?r.message:"An error occurred";t({title:"Error",description:e,variant:"destructive"})}finally{Q(!1)}},eo=[{key:"poNumber",header:"PO Number",sortable:!0},{key:"lotNumber",header:"Lot Number",sortable:!0},{key:"quantity",header:"Quantity",sortable:!0},{key:"itemName",header:"Item Name",sortable:!0},{key:"status",header:"Status",sortable:!0,render:e=>s.jsx("span",{className:`capitalize ${"completed"===e.status?"text-green-600":"inProgress"===e.status?"text-blue-600":"text-gray-600"}`,children:e.status})},{key:"currentOperation",header:"Current Operation",render:e=>s.jsx("div",{className:"flex items-center gap-1",children:[10,15,20,30,40].map(t=>s.jsx("div",{className:`w-6 h-6 rounded-full ${ea(e,t)} 
                flex items-center justify-center text-white text-xs`,children:t},t))})},{key:"modifiedDate",header:"Modified Date",sortable:!0,render:e=>(0,l.WU)(new Date(e.modifiedDate||e.createdDate),"MMM dd, yyyy - hh:mm:ss a")},{key:"actions",header:"Actions",sortable:!0,render:e=>{let t=e.editingUserId&&e.isUserDeleted;return console.log(`Rendering actions for order ${e.poNumber}:`,{editingUserId:e.editingUserId,currentUserId:E,isAdmin:Z,isUserDeleted:e.isUserDeleted,isOrphanedLock:t}),(0,s.jsxs)("div",{className:"flex gap-2",children:[!e.editingUserId&&s.jsx(i.z,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),r.push(`/production-orders/${e.poNumber}`)},children:s.jsx(y.Z,{className:"h-4 w-4"})}),e.editingUserId&&s.jsx(N.pn,{children:(0,s.jsxs)(N.u,{children:[s.jsx(N.aJ,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),r.push(`/production-orders/${e.poNumber}`)},children:[e.editingUserId!==E&&s.jsx(f.Z,{className:`h-4 w-4 ${t?"text-orange-500":"text-gray-600"}`}),e.editingUserId===E&&s.jsx(b.Z,{className:`h-4 w-4 ${t?"text-orange-500":"text-green-600"}`})]})}),s.jsx(N._v,{children:t?(0,s.jsxs)("p",{children:["Locked by deleted user: ",e.editingUserName," (User ID: ",e.editingUserId,"). Click to view details."]}):e.editingUserId===E?(0,s.jsxs)("p",{children:["Locked by you: ",e.editingUserName," (User ID:"," ",e.editingUserId,"). Click to view details."]}):(0,s.jsxs)("p",{children:["Locked by ",e.editingUserName,". Click to view details."]})})]})}),Z&&s.jsx(i.z,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),B(e),X(!0)},children:s.jsx(j.Z,{className:"h-4 w-4 text-red-500"})})]})}}];return(0,s.jsxs)(s.Fragment,{children:[s.jsx(u(),{children:s.jsx("title",{children:"Production Orders - P-Chart System"})}),s.jsx(d.Z,{children:(0,s.jsxs)("div",{className:"py-6",children:[s.jsx(x.Z,{title:"Production Orders",description:"Manage your production orders here.",searchPlaceholder:"Search PO number, lot number, or item...",searchValue:a,onSearchChange:e=>{console.log(`Search query changed to: ${e.target.value}`),c(e.target.value),R(1)},actions:s.jsx(i.z,{className:"bg-purple-600 hover:bg-purple-700 text-white",onClick:()=>r.push("/production-orders/create"),children:"Create New"})}),s.jsx(h.w,{data:w,columns:eo,keyField:"poNumber",isLoading:P,error:D||void 0,pagination:{currentPage:z,totalPages:O,totalItems:I,itemsPerPage:$,onPageChange:e=>{console.log(`Changing page to ${e}`),R(e)},onItemsPerPageChange:e=>{console.log(`Changing items per page to ${e}`),q(e),R(1)}},sortField:F,sortDirection:J,onSortChange:(e,t)=>{console.log(`Sorting by ${e} in ${t} direction`),"actions"===e&&console.log(`Actions column sorting requested: ${"asc"===t?"Unlocked first":"Locked first"}`),V(e),W(t)},emptyMessage:"No production orders found."}),s.jsx(v.aR,{open:H,onOpenChange:X,children:(0,s.jsxs)(v._T,{children:[(0,s.jsxs)(v.fY,{children:[s.jsx(v.f$,{children:"Delete Production Order"}),s.jsx(v.yT,{children:"Are you sure you want to delete this production order? This action cannot be undone."})]}),Y&&(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"PO Number:"})," ",Y.poNumber]}),(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Lot Number:"})," ",Y.lotNumber]}),(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Item Name:"})," ",Y.itemName]})]}),(0,s.jsxs)(v.xo,{children:[s.jsx(v.le,{children:"Cancel"}),s.jsx(v.OL,{onClick:es,disabled:G,className:"bg-red-600 hover:bg-red-700 text-white",children:G?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete"})]})]})})]})})]})}[i,d,x,h,N,v]=w.then?(await w)():w;let P=(0,k.MX)(async(e,t)=>(console.log("[Production Orders] Server-side auth with user:",t.user?.name),{props:{userData:t.user||null}}));a()}catch(e){a(e)}})},53524:e=>{e.exports=require("@prisma/client")},98432:e=>{e.exports=require("bcryptjs")},60614:e=>{e.exports=require("next-auth/jwt")},62113:e=>{e.exports=require("next-auth/next")},47449:e=>{e.exports=require("next-auth/providers/credentials")},41649:e=>{e.exports=require("next-auth/react")},62785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},40968:e=>{e.exports=require("next/head")},16689:e=>{e.exports=require("react")},66405:e=>{e.exports=require("react-dom")},20997:e=>{e.exports=require("react/jsx-runtime")},32131:e=>{e.exports=import("@radix-ui/react-alert-dialog")},25458:e=>{e.exports=import("@radix-ui/react-avatar")},77715:e=>{e.exports=import("@radix-ui/react-dialog")},31481:e=>{e.exports=import("@radix-ui/react-dropdown-menu")},2932:e=>{e.exports=import("@radix-ui/react-hover-card")},14338:e=>{e.exports=import("@radix-ui/react-slot")},61329:e=>{e.exports=import("@radix-ui/react-toast")},66704:e=>{e.exports=import("@radix-ui/react-tooltip")},99648:e=>{e.exports=import("axios")},16926:e=>{e.exports=import("class-variance-authority")},16593:e=>{e.exports=import("clsx")},46812:e=>{e.exports=import("react-error-boundary")},86201:e=>{e.exports=import("react-hot-toast")},14612:e=>{e.exports=import("socket.io-client")},68097:e=>{e.exports=import("tailwind-merge")},57147:e=>{e.exports=require("fs")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},59796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[6255,1267,1777,8559,9833,5143,9266,8715],()=>r(7783));module.exports=a})();