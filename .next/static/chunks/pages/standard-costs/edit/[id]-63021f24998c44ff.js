(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4948],{53219:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(84297).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},23217:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(84297).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},73696:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(84297).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},62402:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/standard-costs/edit/[id]",function(){return r(47752)}])},45847:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(85893),n=r(89630),a=r(5716);function i(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,s.jsx)(n.Z,{}),(0,s.jsx)("main",{className:"flex-1",children:(0,s.jsx)("div",{className:"container",children:t})}),(0,s.jsx)(a.Z,{})]})}},33566:function(e,t,r){"use strict";var s=r(85893);r(67294);var n=r(87764),a=r(35037);t.Z=e=>{let{title:t,description:r,searchPlaceholder:i="Search...",searchValue:c="",onSearchChange:d,actions:l}=e;return console.log("PageHeader: Rendering for ".concat(t)),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-purple-700",children:t}),r&&(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:r})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[d&&(0,s.jsxs)("div",{className:"relative w-96",children:[(0,s.jsx)(n.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),(0,s.jsx)(a.I,{type:"search",placeholder:i,className:"pl-8",value:c,onChange:d})]}),l]})]})})}},13749:function(e,t,r){"use strict";r.d(t,{Ol:function(){return c},SZ:function(){return l},Zb:function(){return i},aY:function(){return o},eW:function(){return u},ll:function(){return d}});var s=r(85893),n=r(67294),a=r(44531);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border dark:border-gray-700 bg-card text-card-foreground shadow",r),...n})});i.displayName="Card";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});c.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...n})});d.displayName="CardTitle";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});l.displayName="CardDescription";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});o.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},2297:function(e,t,r){"use strict";r.d(t,{_:function(){return l}});var s=r(85893),n=r(67294),a=r(49102),i=r(12003),c=r(44531);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.f,{ref:t,className:(0,c.cn)(d(),r),...n})});l.displayName=a.f.displayName},65765:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var s=r(85893),n=r(67294),a=r(44531);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});i.displayName="Textarea"},47752:function(e,t,r){"use strict";r.r(t);var s=r(85893),n=r(67294),a=r(11163),i=r(33299),c=r(45847),d=r(9008),l=r.n(d),o=r(33566),u=r(87249),m=r(35037),f=r(2297),x=r(65765),p=r(13749),h=r(98225),j=r(86501),N=r(23217),y=r(53219),g=r(73696);t.default=(0,h.c2)(function(){let e=(0,a.useRouter)(),{id:t}=e.query,{data:r}=(0,i.useSession)(),[d,h]=(0,n.useState)(null),[v,b]=(0,n.useState)({itemName:"",description:"",costPerUnit:"",currency:"USD"}),[w,C]=(0,n.useState)({}),[P,U]=(0,n.useState)(!0),[S,k]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{if(!(!t||Array.isArray(t)))try{U(!0);let r=await fetch("/api/standard-costs/".concat(t),{credentials:"include"});if(!r.ok){if(404===r.status){j.Am.error("Standard cost not found"),e.push("/standard-costs");return}throw Error("Failed to fetch standard cost")}let s=await r.json();h(s),b({itemName:s.itemName,description:s.description||"",costPerUnit:s.costPerUnit.toString(),currency:s.currency})}catch(t){console.error("Error fetching standard cost:",t),j.Am.error("Failed to load standard cost"),e.push("/standard-costs")}finally{U(!1)}})()},[t,e]);let Z=e=>{let{name:t,value:r}=e.target;b(e=>({...e,[t]:r})),w[t]&&C(e=>({...e,[t]:""}))},E=()=>{let e={};if(v.itemName.trim()||(e.itemName="Item name is required"),v.costPerUnit.trim()){let t=parseFloat(v.costPerUnit);(isNaN(t)||t<0)&&(e.costPerUnit="Cost per unit must be a valid positive number")}else e.costPerUnit="Cost per unit is required";return C(e),0===Object.keys(e).length},_=async t=>{if(t.preventDefault(),E()&&d){k(!0);try{let t=await fetch("/api/standard-costs/".concat(d.id),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({itemName:v.itemName.trim(),description:v.description.trim()||null,costPerUnit:parseFloat(v.costPerUnit),currency:v.currency})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update standard cost")}let r=await t.json();console.log("Updated standard cost:",r),j.Am.success("Standard cost updated successfully"),e.push("/standard-costs")}catch(e){console.error("Error updating standard cost:",e),j.Am.error(e instanceof Error?e.message:"Failed to update standard cost")}finally{k(!1)}}},F=()=>{e.push("/standard-costs")};return P?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{children:(0,s.jsx)("title",{children:"Edit Standard Cost - P-Chart System"})}),(0,s.jsx)(c.Z,{children:(0,s.jsx)("div",{className:"py-6",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(N.Z,{className:"h-6 w-6 animate-spin"}),(0,s.jsx)("span",{children:"Loading standard cost..."})]})})})})]}):d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{children:(0,s.jsx)("title",{children:"Edit Standard Cost - P-Chart System"})}),(0,s.jsx)(c.Z,{children:(0,s.jsxs)("div",{className:"py-6",children:[(0,s.jsx)(o.Z,{title:"Edit Standard Cost",description:"Update standard cost information for ".concat(d.itemName),actions:(0,s.jsxs)(u.z,{variant:"outline",onClick:F,className:"flex items-center",children:[(0,s.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Back to List"]})}),(0,s.jsxs)(p.Zb,{children:[(0,s.jsx)(p.Ol,{children:(0,s.jsx)(p.ll,{children:"Standard Cost Information"})}),(0,s.jsx)(p.aY,{children:(0,s.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(f._,{htmlFor:"itemName",children:["Item Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(m.I,{id:"itemName",name:"itemName",type:"text",value:v.itemName,onChange:Z,placeholder:"Enter item name",className:w.itemName?"border-red-500":""}),w.itemName&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:w.itemName})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(f._,{htmlFor:"costPerUnit",children:["Cost Per Unit ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(m.I,{id:"costPerUnit",name:"costPerUnit",type:"number",step:"0.0001",min:"0",value:v.costPerUnit,onChange:Z,placeholder:"0.0000",className:w.costPerUnit?"border-red-500":""}),w.costPerUnit&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:w.costPerUnit})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(f._,{htmlFor:"currency",children:"Currency"}),(0,s.jsxs)("select",{id:"currency",name:"currency",value:v.currency,onChange:Z,className:"mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"USD",children:"USD"}),(0,s.jsx)("option",{value:"EUR",children:"EUR"}),(0,s.jsx)("option",{value:"GBP",children:"GBP"}),(0,s.jsx)("option",{value:"JPY",children:"JPY"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f._,{children:"Status"}),(0,s.jsx)("div",{className:"mt-2 flex items-center space-x-2",children:d.isActive?(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"}):(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactive"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f._,{htmlFor:"description",children:"Description"}),(0,s.jsx)(x.g,{id:"description",name:"description",value:v.description,onChange:Z,placeholder:"Enter optional description",rows:3})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,s.jsx)(u.z,{type:"button",variant:"outline",onClick:F,disabled:S,children:"Cancel"}),(0,s.jsx)(u.z,{type:"submit",disabled:S,className:"bg-purple-600 hover:bg-purple-700",children:S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Update Standard Cost"]})})]})]})})]})]})})]}):null})},49102:function(e,t,r){"use strict";r.d(t,{f:function(){return c}});var s=r(67294),n=r(75320),a=r(85893),i=s.forwardRef((e,t)=>(0,a.jsx)(n.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var c=i}},function(e){e.O(0,[4192,1664,4430,7164,2888,9774,179],function(){return e(e.s=62402)}),_N_E=e.O()}]);