(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[937],{29240:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/system-update",function(){return t(63887)}])},45847:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(85893),r=t(89630),l=t(5716);function n(e){let{children:s}=e;return(0,a.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)("main",{className:"flex-1",children:(0,a.jsx)("div",{className:"container",children:s})}),(0,a.jsx)(l.Z,{})]})}},33566:function(e,s,t){"use strict";var a=t(85893);t(67294);var r=t(87764),l=t(35037);s.Z=e=>{let{title:s,description:t,searchPlaceholder:n="Search...",searchValue:i="",onSearchChange:c,actions:d}=e;return console.log("PageHeader: Rendering for ".concat(s)),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-purple-700",children:s}),t&&(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[c&&(0,a.jsxs)("div",{className:"relative w-96",children:[(0,a.jsx)(r.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),(0,a.jsx)(l.I,{type:"search",placeholder:n,className:"pl-8",value:i,onChange:c})]}),d]})]})})}},81396:function(e,s,t){"use strict";t.d(s,{Cd:function(){return d},X:function(){return o},bZ:function(){return c}});var a=t(85893),r=t(67294),l=t(12003),n=t(44531);let i=(0,l.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",info:"border-info/50 text-info dark:border-info [&>svg]:text-info",warning:"border-warning/50 text-warning dark:border-warning [&>svg]:text-warning",success:"border-success/50 text-success dark:border-success [&>svg]:text-success"}},defaultVariants:{variant:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,...l}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(i({variant:r}),t),...l})});c.displayName="Alert";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",t),...r})});d.displayName="AlertTitle";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",t),...r})});o.displayName="AlertDescription"},49827:function(e,s,t){"use strict";t.d(s,{C:function(){return i}});var a=t(85893);t(67294);var r=t(12003),l=t(44531);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(n({variant:t}),s),...r})}},13749:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return n},aY:function(){return o},eW:function(){return u},ll:function(){return c}});var a=t(85893),r=t(67294),l=t(44531);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("rounded-xl border dark:border-gray-700 bg-card text-card-foreground shadow",t),...r})});n.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("font-semibold leading-none tracking-tight",t),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},17344:function(e,s,t){"use strict";t.d(s,{a:function(){return c}});var a=t(33299),r=t(11163),l=t(67294),n=t(98225),i=t(65050);function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:s,status:t}=(0,a.useSession)(),c=(0,r.useRouter)(),{toast:d}=(0,i.pm)(),[o,u]=(0,l.useState)(!1),[x,m]=(0,l.useState)(!0),[p,h]=(0,l.useState)(null),[f,g]=(0,l.useState)(!1),{redirectTo:j="/auth/login",requiredRoles:y=[]}=e;(0,l.useEffect)(()=>{if(console.log("Auth effect running, status:",t,"verified:",f),"loading"===t||f)return;if(null==s?void 0:s.user){if(console.log("Found NextAuth session, storing to localStorage"),n.UserSession.storeSession(s.user),y.length>0){var e;let t=((null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.role)||"").toLowerCase();if(!y.some(e=>e.toLowerCase()===t)){console.log("Required role not found. User role: ".concat(t)),u(!1),m(!1),h("You do not have permission to access this page"),g(!0),c.push("/dashboard");return}}u(!0),m(!1),h(null),g(!0);return}let a=n.UserSession.getSession();if(a){if(console.log("Found valid localStorage session, using as fallback"),y.length>0){let e=(a.role||"").toLowerCase();if(!y.some(s=>s.toLowerCase()===e)){console.log("Required role not found. Local user role: ".concat(e)),u(!1),m(!1),h("You do not have permission to access this page"),g(!0),c.push("/dashboard");return}}u(!0),m(!1),h(null),g(!0);return}console.log("No valid session found, redirecting to login"),c.push("".concat(j,"?callbackUrl=").concat(encodeURIComponent(window.location.href)))},[t,s,c,j,y,f]);let N=(0,l.useCallback)(()=>n.UserSession.getAuthHeaders(),[]),v=(0,l.useCallback)(async()=>n.UserSession.getCurrentUser(),[]),b=(0,l.useCallback)(e=>n.UserSession.hasRole(e),[]),w=(0,l.useCallback)(()=>{console.log("Handling expired session"),n.UserSession.clearSession(),(0,a.signOut)({redirect:!1});let e=window.location.href;c.push("".concat(j,"?callbackUrl=").concat(encodeURIComponent(e),"&expired=true"))},[j,c]),U=(0,l.useCallback)(e=>{switch(e.status){case 401:return console.log("Detected 401 unauthorized response - session likely expired"),w(),!1;case 403:return console.log("Detected 403 forbidden response - permission denied"),d({title:"Permission Denied",description:"You don't have permission to access this resource",variant:"destructive"}),!1;case 429:return console.log("Detected 429 response - rate limited"),d({title:"Rate Limited",description:"Too many requests. Please try again later.",variant:"destructive"}),!1;case 500:case 502:case 503:case 504:return console.log("Detected server error (".concat(e.status,")")),d({title:"Server Error",description:"The server encountered an error. Please try again later.",variant:"destructive"}),!1}return!0},[w,d]);return{session:s,status:t,isAuthorized:o,isLoading:x,authError:p,getAuthHeaders:N,getCurrentUser:v,hasRole:b,handleExpiredSession:w,checkResponseAuth:U}}},63887:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return F}});var a=t(85893),r=t(67294),l=t(11163),n=t(17344),i=t(98225),c=t(45847),d=t(33566),o=t(87249),u=t(13749),x=t(81396),m=t(49827),p=t(37622),h=t(38074),f=t(6757),g=t(44531);let j=r.forwardRef((e,s)=>{let{className:t,value:r,...l}=e;return(0,a.jsx)(f.fC,{ref:s,className:(0,g.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,a.jsx)(f.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});j.displayName=f.fC.displayName;var y=t(28142),N=t(19162),v=t(78216),b=t(13756),w=t(47653),U=t(84655),Z=t(41352),S=e=>{let{onUploadComplete:s,onUploadStart:t,disabled:l=!1}=e,[n,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)(0),[m,p]=(0,r.useState)(null),[f,g]=(0,r.useState)(null),[S,k]=(0,r.useState)(null),[C,R]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/system-update/git-config"),s=await e.json();s.success?k(s.gitConfig):k({isGitRepo:!1,hasRemote:!1,currentBranch:null,remoteUrl:null,hasCredentials:!1,canPush:!1,error:s.error||"Failed to fetch git configuration"})}catch(e){console.error("Error fetching git config:",e),k({isGitRepo:!1,hasRemote:!1,currentBranch:null,remoteUrl:null,hasCredentials:!1,canPush:!1,error:"Network error"})}finally{R(!1)}})()},[]);let P=(0,r.useCallback)(e=>{e.length>0&&(p(e[0]),g(null))},[]),{getRootProps:z,getInputProps:F,isDragActive:M}=(0,h.uI)({onDrop:P,accept:{"application/zip":[".zip"],"application/x-zip-compressed":[".zip"]},maxFiles:1,disabled:l||n}),A=async()=>{if(m){i(!0),d(0),null==t||t();try{let e=new FormData;e.append("file",m);let t=new XMLHttpRequest;t.upload.onprogress=e=>{if(e.lengthComputable){let s=e.loaded/e.total*100;d(s)}};let a=new Promise((e,s)=>{t.onload=()=>{if(200===t.status){let s=JSON.parse(t.responseText);e(s)}else{let e=JSON.parse(t.responseText);s(e)}},t.onerror=()=>{s({error:"Upload failed"})}});t.open("POST","/api/admin/system-update/upload"),t.send(e);let r=await a;g(r),s(r)}catch(t){console.error("Upload error:",t);let e={success:!1,error:t.error||"Upload failed",details:t.details||[]};g(e),s(e)}finally{i(!1),d(0)}}},B=()=>{p(null),g(null)},I=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]};return(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(u.Zb,{children:[(0,a.jsxs)(u.Ol,{children:[(0,a.jsxs)(u.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(y.Z,{className:"w-5 h-5"}),"Upload System Update"]}),(0,a.jsx)(u.SZ,{children:"Upload a ZIP file containing the system update package created by the development team."})]}),(0,a.jsxs)(u.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(N.Z,{className:"w-5 h-5"}),(0,a.jsx)("h3",{className:"font-medium",children:"Git Integration Status"})]}),C?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}),"Checking git configuration..."]}):S?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Repository:"}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(S.isGitRepo?"text-green-600":"text-red-600"),children:S.isGitRepo?"Detected":"Not detected"})]}),S.isGitRepo&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Current Branch:"}),(0,a.jsxs)("span",{className:"text-sm font-medium flex items-center gap-1",children:[(0,a.jsx)(v.Z,{className:"w-3 h-3"}),S.currentBranch||"Unknown"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Remote URL:"}),(0,a.jsx)("span",{className:"text-sm font-medium max-w-xs truncate",children:S.remoteUrl||"Not configured"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Push Access:"}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(S.canPush?"text-green-600":"text-red-600"),children:S.canPush?"Available":"Not available"})]})]}),S.canPush?(0,a.jsxs)(x.bZ,{children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),(0,a.jsx)(x.X,{children:"Manual updates will be automatically pushed to git repository for persistence."})]}):(0,a.jsxs)(x.bZ,{children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),(0,a.jsxs)(x.X,{children:["Manual updates will be applied locally only. Future git pulls may overwrite changes.",S.error&&(0,a.jsxs)("div",{className:"mt-1 text-xs text-gray-600",children:["Error: ",S.error]})]})]})]}):(0,a.jsxs)(x.bZ,{children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),(0,a.jsx)(x.X,{children:"Failed to check git configuration. Manual updates will be applied locally only."})]})]}),!m&&(0,a.jsxs)("div",{...z(),className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ".concat(M?"border-primary bg-primary/10":"border-gray-300 hover:border-gray-400"," ").concat(l?"opacity-50 cursor-not-allowed":""),children:[(0,a.jsx)("input",{...F()}),(0,a.jsx)(U.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),M?(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Drop the ZIP file here..."}):(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Drag & drop a ZIP file here, or click to select"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Only ZIP files are supported (max 200MB)"})]})]}),m&&!f&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(U.Z,{className:"w-8 h-8 text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:m.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:I(m.size)})]})]}),(0,a.jsx)(o.z,{variant:"outline",size:"sm",onClick:B,disabled:n,children:(0,a.jsx)(Z.Z,{className:"w-4 h-4"})})]}),n&&(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Uploading..."}),(0,a.jsxs)("span",{children:[Math.round(c),"%"]})]}),(0,a.jsx)(j,{value:c,className:"h-2"})]}),!n&&(0,a.jsx)("div",{className:"mt-4 flex justify-end",children:(0,a.jsxs)(o.z,{onClick:A,disabled:l,children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Upload Update Package"]})})]}),f&&(0,a.jsxs)("div",{className:"space-y-4",children:[f.success?(0,a.jsxs)(x.bZ,{className:"border-green-200 bg-green-50",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsxs)(x.X,{className:"text-green-800",children:[(0,a.jsx)("strong",{children:"Upload successful!"})," The system update package has been uploaded and validated."]})]}):(0,a.jsxs)(x.bZ,{className:"border-red-200 bg-red-50",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-red-600"}),(0,a.jsxs)(x.X,{className:"text-red-800",children:[(0,a.jsx)("strong",{children:"Upload failed:"})," ",f.error,f.details&&f.details.length>0&&(0,a.jsx)("ul",{className:"mt-2 list-disc list-inside text-sm",children:f.details.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]})]}),f.success&&f.packageInfo&&(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Package Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Filename:"}),(0,a.jsx)("p",{className:"font-medium",children:f.packageInfo.filename})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Version:"}),(0,a.jsx)("p",{className:"font-medium",children:f.packageInfo.version})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Size:"}),(0,a.jsx)("p",{className:"font-medium",children:I(f.packageInfo.size)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Files:"}),(0,a.jsxs)("p",{className:"font-medium",children:[f.packageInfo.files," files"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Uploaded by:"}),(0,a.jsx)("p",{className:"font-medium",children:f.packageInfo.uploadedBy})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Uploaded at:"}),(0,a.jsx)("p",{className:"font-medium",children:new Date(f.packageInfo.uploadedAt).toLocaleString()})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end gap-2",children:(0,a.jsx)(o.z,{variant:"outline",onClick:B,children:"Upload Another"})})]})]})]})})},k=t(56989),C=t(42297),R=t(13025),P=t(45077),z=t(49482),F=(0,i.c2)(()=>{let{session:e}=(0,n.a)();(0,l.useRouter)();let[s,t]=(0,r.useState)(null),[i,h]=(0,r.useState)([]),[f,g]=(0,r.useState)(!0),[j,N]=(0,r.useState)(null),[v,U]=(0,r.useState)(!1),[Z,F]=(0,r.useState)(null),M=async()=>{try{g(!0);let e=await fetch("/api/admin/system-update/status"),s=await e.json();s.success?(t(s.systemStatus||null),h(s.availableUpdates||[])):F({type:"error",message:s.message||"Failed to load system status"})}catch(e){console.error("Error loading system status:",e),F({type:"error",message:"Failed to load system status"})}finally{g(!1)}},A=async e=>{try{N(e),F(null);let s=await fetch("/api/admin/system-update/apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updateId:e})}),t=await s.json();t.success?(F({type:"success",message:t.message||"Update applied successfully",details:t.needsManualRestart?"Manual restart required":null}),await M()):F({type:"error",message:t.message||"Failed to apply update",details:t.details})}catch(e){console.error("Error applying update:",e),F({type:"error",message:"Failed to apply update"})}finally{N(null)}},B=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]};return(0,r.useEffect)(()=>{M()},[]),(0,a.jsx)(c.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(d.Z,{title:"System Updates",description:"Manage system updates and application versions"}),Z&&(0,a.jsxs)(x.bZ,{className:"border-".concat("success"===Z.type?"green":"error"===Z.type?"red":"blue","-200 bg-").concat("success"===Z.type?"green":"error"===Z.type?"red":"blue","-50"),children:["success"===Z.type?(0,a.jsx)(b.Z,{className:"h-4 w-4 text-green-600"}):"error"===Z.type?(0,a.jsx)(w.Z,{className:"h-4 w-4 text-red-600"}):(0,a.jsx)(k.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsxs)(x.X,{className:"text-".concat("success"===Z.type?"green":"error"===Z.type?"red":"blue","-800"),children:[Z.message,Z.details&&(0,a.jsx)("div",{className:"mt-2 text-sm",children:"string"==typeof Z.details?(0,a.jsx)("p",{children:Z.details}):(0,a.jsx)("pre",{className:"text-xs bg-gray-100 p-2 rounded mt-1",children:JSON.stringify(Z.details,null,2)})})]})]}),s&&(0,a.jsxs)(u.Zb,{children:[(0,a.jsx)(u.Ol,{children:(0,a.jsxs)(u.ll,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"System Status"}),(0,a.jsxs)(o.z,{variant:"outline",size:"sm",onClick:M,disabled:f,children:[(0,a.jsx)(C.Z,{className:"w-4 h-4 mr-2 ".concat(f?"animate-spin":"")}),"Refresh"]})]})}),(0,a.jsx)(u.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s.currentVersion}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Current Version"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.pendingUpdates}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pending Updates"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:s.appliedUpdates}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Applied Updates"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:s.updatesAvailable}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Available"})]})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Available Updates"}),(0,a.jsxs)(p.Vq,{open:v,onOpenChange:U,children:[(0,a.jsx)(p.hg,{asChild:!0,children:(0,a.jsxs)(o.z,{children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Upload Update"]})}),(0,a.jsxs)(p.cZ,{className:"max-w-2xl",children:[(0,a.jsxs)(p.fK,{children:[(0,a.jsx)(p.$N,{children:"Upload System Update"}),(0,a.jsx)(p.Be,{children:"Upload a new system update package from the development team."})]}),(0,a.jsx)(S,{onUploadComplete:e=>{e.success?(F({type:"success",message:"Update package uploaded successfully"}),U(!1),M()):F({type:"error",message:e.error||"Upload failed",details:e.details})},disabled:null!==j})]})]})]}),f?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(C.Z,{className:"w-6 h-6 mx-auto mb-2 animate-spin"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading updates..."})]}):0===i.length?(0,a.jsx)(u.Zb,{children:(0,a.jsxs)(u.aY,{className:"text-center py-8",children:[(0,a.jsx)(R.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No updates available"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Upload a new update package to get started"})]})}):(0,a.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,a.jsxs)(u.Zb,{className:e.applied?"bg-green-50":"",children:[(0,a.jsx)(u.Ol,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(u.ll,{className:"flex items-center gap-2",children:[e.filename,(0,a.jsx)(m.C,{variant:e.applied?"default":"secondary",children:e.applied?"Applied":"Pending"})]}),(0,a.jsxs)(u.SZ,{children:["Version ",e.version," • ",B(e.size)," ","• ",e.fileCount," files"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:e.applied?(0,a.jsx)(b.Z,{className:"w-5 h-5 text-green-600"}):(0,a.jsx)(P.Z,{className:"w-5 h-5 text-yellow-600"})})]})}),(0,a.jsx)(u.aY,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:["Uploaded by: ",e.uploadedBy]}),(0,a.jsxs)("p",{children:["Uploaded at:"," ",new Date(e.uploadedAt).toLocaleString()]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:!e.applied&&(0,a.jsxs)(o.z,{onClick:()=>A(e.id),disabled:null!==j,size:"sm",children:[j===e.id?(0,a.jsx)(C.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(z.Z,{className:"w-4 h-4 mr-2"}),j===e.id?"Applying...":"Apply Update"]})})]})})]},e.id))})]})})})}},function(e){e.O(0,[4192,1664,4430,4762,7164,2888,9774,179],function(){return e(e.s=29240)}),_N_E=e.O()}]);