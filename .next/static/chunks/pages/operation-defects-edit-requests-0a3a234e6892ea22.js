(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[259],{61932:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(84297).Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},23217:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(84297).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},41518:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/operation-defects-edit-requests",function(){return r(69116)}])},49827:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(85893);r(67294);var s=r(12003),a=r(44531);let d=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(d({variant:r}),t),...s})}},13749:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return d},aY:function(){return c},eW:function(){return u},ll:function(){return i}});var n=r(85893),s=r(67294),a=r(44531);let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border dark:border-gray-700 bg-card text-card-foreground shadow",r),...s})});d.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...s})});i.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});l.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},2297:function(e,t,r){"use strict";r.d(t,{_:function(){return l}});var n=r(85893),s=r(67294),a=r(49102),d=r(12003),o=r(44531);let i=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,o.cn)(i(),r),...s})});l.displayName=a.f.displayName},54462:function(e,t,r){"use strict";r.d(t,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return x},i4:function(){return m},ki:function(){return u}});var n=r(85893),s=r(67294),a=r(85872),d=r(8971),o=r(84979),i=r(13742),l=r(44531);let c=a.fC;a.ZA;let u=a.B4,m=s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,n.jsxs)(a.xz,{ref:t,className:(0,l.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...o,children:[s,(0,n.jsx)(a.JO,{asChild:!0,children:(0,n.jsx)(d.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=a.xz.displayName;let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.u_,{ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})});f.displayName=a.u_.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.$G,{ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})});p.displayName=a.$G.displayName;let h=s.forwardRef((e,t)=>{let{className:r,children:s,position:d="popper",...o}=e;return(0,n.jsx)(a.h_,{children:(0,n.jsxs)(a.VY,{ref:t,className:(0,l.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:d,...o,children:[(0,n.jsx)(f,{}),(0,n.jsx)(a.l_,{className:(0,l.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,n.jsx)(p,{})]})})});h.displayName=a.VY.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.__,{ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",r),...s})}).displayName=a.__.displayName;let x=s.forwardRef((e,t)=>{let{className:r,children:s,...d}=e;return(0,n.jsxs)(a.ck,{ref:t,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...d,children:[(0,n.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(a.wU,{children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(a.eT,{children:s})]})});x.displayName=a.ck.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=a.Z0.displayName},18732:function(e,t,r){"use strict";r.d(t,{$:function(){return d}});var n=r(85893),s=r(23217),a=r(44531);function d(e){let{size:t="md",className:r}=e;return(0,n.jsx)(s.Z,{className:(0,a.cn)("animate-spin text-primary",{sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[t],r)})}},65765:function(e,t,r){"use strict";r.d(t,{g:function(){return d}});var n=r(85893),s=r(67294),a=r(44531);let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});d.displayName="Textarea"},69116:function(e,t,r){"use strict";r.r(t);var n=r(85893),s=r(67294),a=r(9008),d=r.n(a),o=r(11163),i=r(98225),l=r(23560),c=r(1280),u=r(86501),m=r(45847),f=r(33566),p=r(87249),h=r(13749),x=r(37622),g=r(54462),y=r(49827),v=r(18732),j=r(2297),N=r(65765),b=r(25998),w=r(3332);t.default=(0,i.QO)(()=>{var e,t,r,a,i,D,q,R,C,M,T,S,_,P,Z;let k=(0,o.useRouter)(),[A,F]=(0,s.useState)([]),[O,E]=(0,s.useState)([]),[I,Q]=(0,s.useState)(!0),[H,B]=(0,s.useState)(""),[L,z]=(0,s.useState)(1),[V,U]=(0,s.useState)(10),[W,Y]=(0,s.useState)(void 0),[G,J]=(0,s.useState)("asc"),[$,X]=(0,s.useState)(null),[K,ee]=(0,s.useState)(!1),[et,er]=(0,s.useState)(!1),[en,es]=(0,s.useState)("pending"),[ea,ed]=(0,s.useState)(null),[eo,ei]=(0,s.useState)(!1),[el,ec]=(0,s.useState)("approved"),[eu,em]=(0,s.useState)(""),[ef,ep]=(0,s.useState)(!1),{emit:eh,isConnected:ex}=(0,w.lm)();(0,s.useEffect)(()=>{(async()=>{try{console.log("Fetching current user info");let e=await l.Z.get("/api/me");if(e.data){let t=e.data;X(t);let r=t.role.toLowerCase();ee("admin"===r),er("encoder"===r),console.log("Current user:",t,"isAdmin:","admin"===r,"isEncoder:","encoder"===r)}}catch(e){console.error("Error fetching current user:",e)}})()},[]),(0,s.useEffect)(()=>{if(k.asPath.includes("#")&&A.length>0&&!I){let e=parseInt(k.asPath.split("#")[1]);if(console.log("Found request ID in URL hash: ".concat(e)),!isNaN(e)){let t=A.find(t=>t.id===e);t?(console.log("Found matching request for ID ".concat(e,":"),t),ey(t)):(console.log("Request with ID ".concat(e," not found in loaded requests")),eg(e))}}},[k.asPath,A,I]);let eg=async e=>{try{console.log("Fetching single request with ID: ".concat(e));let t=await l.Z.get("/api/operation-defect-edit-requests",{params:{id:e}});if(t.data){let r=t.data;if(r.editRequests&&r.editRequests.length>0){let t=r.editRequests.find(t=>t.id===e);t?(console.log("Successfully fetched request with ID ".concat(e,":"),t),ey(t)):(console.log("Request with ID ".concat(e," not found in response")),u.ZP.error("Edit request not found"))}else console.log("No edit requests found in API response"),u.ZP.error("Edit request not found")}}catch(t){console.error("Error fetching operation defect edit request with ID ".concat(e,":"),t),u.ZP.error("Failed to load the requested edit request")}};(0,s.useEffect)(()=>{(K||et)&&(async()=>{try{var e;console.log("Fetching operation defects edit requests"),Q(!0);let t="/api/operation-defect-edit-requests",r=new URLSearchParams;"all"!==en&&r.append("status",en),W&&(r.append("sortField",W),r.append("sortDirection",G)),[...r].length>0&&(t+="?".concat(r.toString())),console.log("Calling API with URL: ".concat(t)),console.log("Status filter: ".concat(en));let n=(await l.Z.get(t)).data;console.log("Received ".concat((null===(e=n.editRequests)||void 0===e?void 0:e.length)||0," edit requests with status filter: ").concat(en));let s=n.editRequests||[];F(s),E(s),console.log("Updated state with ".concat(s.length," requests"))}catch(e){console.error("Error fetching operation defects edit requests:",e),u.ZP.error("Failed to load operation defects edit requests"),F([]),E([])}finally{Q(!1)}})()},[K,et,W,G,en]),(0,s.useEffect)(()=>{if(!A){E([]);return}console.log("Filtering ".concat(A.length,' requests by search: "').concat(H,'"'));let e=A;if(H.trim()){let t=H.toLowerCase().trim();e=e.filter(e=>{var r,n,s,a;return((null===(r=e.productionOrder)||void 0===r?void 0:r.poNumber)||"").toLowerCase().includes(t)||((null===(n=e.operationDefect)||void 0===n?void 0:n.defectName)||"").toLowerCase().includes(t)||((null===(s=e.operation)||void 0===s?void 0:s.operation)||"").toLowerCase().includes(t)||((null===(a=e.requestedBy)||void 0===a?void 0:a.name)||"").toLowerCase().includes(t)})}console.log("Filtered to ".concat(e.length," requests after search")),E(e)},[A,H]);let ey=e=>{console.log("Viewing operation defect edit request:",e),ed(e),ei(!0),ec("approved"),em("")},ev=async()=>{if(ea){ep(!0);try{console.log("Resolving operation defect edit request ".concat(ea.id," with status: ").concat(el));let e=await l.Z.put("/api/operation-defect-edit-requests/".concat(ea.id,"/resolve"),{status:el,comments:eu});console.log("Response:",e.data);let t=e.data.editRequest;F(e=>e.map(e=>e.id===ea.id?t:e)),ex?(console.log("Emitting defect-edit-resolved event for real-time updates"),eh("defect-edit-resolved",{id:t.id,defectId:t.operationDefectId,requestedById:t.requestedById,resolvedById:t.resolvedById,approved:"approved"===el,createdAt:new Date().toISOString()}),eh("update-notification-count",{})):console.warn("Socket not connected, only server-side notification will be used"),ei(!1),ed(null),em(""),u.ZP.success("Operation defect edit request ".concat("approved"===el?"approved":"rejected"," successfully"))}catch(e){console.error("Error resolving operation defect edit request:",e),u.ZP.error("Failed to resolve operation defect edit request")}finally{ep(!1)}}},ej=e=>{switch(e){case"pending":return(0,n.jsx)(y.C,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Pending"});case"approved":return(0,n.jsx)(y.C,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Approved"});case"rejected":return(0,n.jsx)(y.C,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Rejected"});default:return(0,n.jsx)(y.C,{variant:"outline",children:e})}},eN=[{key:"productionOrder.poNumber",header:"PO Number",sortable:!0,render:e=>{var t,r;return(0,n.jsx)("a",{href:"/production-orders/".concat(null===(t=e.productionOrder)||void 0===t?void 0:t.poNumber),target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer text-blue-600 hover:underline font-medium",children:null===(r=e.productionOrder)||void 0===r?void 0:r.poNumber})}},{key:"operation.operation",header:"Operation",sortable:!0,render:e=>{var t;return null===(t=e.operation)||void 0===t?void 0:t.operation}},{key:"requestType",header:"Request Type",sortable:!0,render:e=>{switch(e.requestType||"edit"){case"add":return(0,n.jsx)(y.C,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Add"});case"delete":return(0,n.jsx)(y.C,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Delete"});default:return(0,n.jsx)(y.C,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200",children:"Edit"})}}},{key:"operationDefect.defectName",header:"Defect",sortable:!0,render:e=>{var t;return null===(t=e.operationDefect)||void 0===t?void 0:t.defectName}},{key:"operationDefectId",header:"Operation Defect ID",sortable:!0,render:e=>e.operationDefectId},{key:"requestedBy.name",header:"Requested By",sortable:!0,render:e=>{var t;return null===(t=e.requestedBy)||void 0===t?void 0:t.name}},{key:"createdAt",header:"Date Requested",sortable:!0,render:e=>(0,c.ZP)(new Date(e.createdAt),"mmm d, yyyy h:MM TT")},{key:"requestedQty",header:"Req. Change",sortable:!0,render:e=>{var t;let r=e.requestedQty-e.currentQty,s=(0,n.jsxs)("span",{className:r>0?"text-green-600":r<0?"text-red-600":"",children:[e.currentQty," → ",e.requestedQty," (",r>0?"+".concat(r):r,")"]});if((null===(t=e.operationCode)||void 0===t?void 0:t.toLowerCase())==="op10"&&"delete"!==e.requestType){let t=void 0!==e.currentReplacement?e.currentReplacement:e.currentQty,r=void 0!==e.requestedReplacement?e.requestedReplacement:e.requestedQty,a=r-t,d=a>0?"text-blue-600":a<0?"text-blue-600":"";return(0,n.jsxs)("div",{children:[s,(0,n.jsxs)("div",{className:"text-sm ".concat(d),children:["RP: ",t," → ",r," (",a>0?"+".concat(a):a,")"]})]})}return s}},{key:"status",header:"Status",sortable:!0,render:e=>ej(e.status)},{key:"actions",header:"Actions",render:e=>(0,n.jsx)(p.z,{variant:"outline",size:"sm",onClick:()=>ey(e),disabled:!!K&&"pending"!==e.status,children:et||"pending"!==e.status?"View":"Review"})}];O.slice((L-1)*V,L*V);let eb=Math.ceil(O.length/V);return(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(d(),{children:(0,n.jsx)("title",{children:"Operation Defects Edit Requests | P-Chart"})}),(0,n.jsxs)("div",{className:"py-6",children:[(0,n.jsx)(f.Z,{title:"Operation Defects Edit Requests",description:"View and manage operation defects edit requests",searchPlaceholder:"Search requests...",searchValue:H,onSearchChange:e=>{B(e.target.value)},actions:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)(g.Ph,{value:en,onValueChange:e=>{console.log("Changing status filter to: ".concat(e)),es(e),z(1)},children:[(0,n.jsx)(g.i4,{className:"w-[180px]",children:(0,n.jsx)(g.ki,{placeholder:"Filter by status"})}),(0,n.jsxs)(g.Bw,{children:[(0,n.jsx)(g.Ql,{value:"pending",children:"Pending"}),(0,n.jsx)(g.Ql,{value:"approved",children:"Approved"}),(0,n.jsx)(g.Ql,{value:"rejected",children:"Rejected"}),(0,n.jsx)(g.Ql,{value:"all",children:"All"})]})]})})}),(0,n.jsx)(h.Zb,{className:"mt-6",children:(0,n.jsx)(h.aY,{className:"pt-6",children:I?(0,n.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,n.jsx)(v.$,{size:"lg"})}):(0,n.jsx)(b.w,{data:O,columns:eN,keyField:"id",isLoading:I,error:"",sortField:W,sortDirection:G,onSortChange:(e,t)=>{console.log("Sorting by ".concat(e," ").concat(t)),Y(e),J(t)},pagination:{currentPage:L,totalPages:eb,totalItems:O.length,itemsPerPage:V,onPageChange:e=>{console.log("Changing to page ".concat(e)),z(e)},onItemsPerPageChange:e=>{console.log("Changing items per page to ".concat(e)),U(e),z(1)}},emptyMessage:"No operation defects edit requests found."})})})]}),(0,n.jsx)(x.Vq,{open:eo,onOpenChange:ei,children:(0,n.jsxs)(x.cZ,{className:"sm:max-w-[525px] max-h-[90vh] overflow-y-auto",children:[(0,n.jsxs)(x.fK,{children:[(0,n.jsxs)(x.$N,{children:[et?"View":"Review"," Operation Defect Edit Request"]}),(0,n.jsx)(x.Be,{children:et?"View details of the operation defect edit request":"Review and approve or reject the operation defect edit request"})]}),ea&&(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"PO Number"}),(0,n.jsx)("p",{className:"font-medium",children:null===(e=ea.productionOrder)||void 0===e?void 0:e.poNumber})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Part"}),(0,n.jsx)("p",{children:null===(t=ea.productionOrder)||void 0===t?void 0:t.partName})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Operation"}),(0,n.jsx)("p",{children:null===(r=ea.operation)||void 0===r?void 0:r.operation})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Defect"}),(0,n.jsx)("p",{children:null===(a=ea.operationDefect)||void 0===a?void 0:a.defectName})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Request Type"}),(0,n.jsx)("p",{className:"mt-1",children:(()=>{switch(ea.requestType||"edit"){case"add":return(0,n.jsx)(y.C,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Add"});case"delete":return(0,n.jsx)(y.C,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Delete"});default:return(0,n.jsx)(y.C,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200",children:"Edit"})}})()})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Status"}),(0,n.jsx)("div",{className:"mt-1",children:ej(ea.status)})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Operation Defect ID"}),(0,n.jsx)("p",{children:ea.operationDefectId})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Requested By"}),(0,n.jsx)("p",{children:null===(i=ea.requestedBy)||void 0===i?void 0:i.name})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Current Quantity"}),(0,n.jsx)("p",{className:"font-medium",children:ea.currentQty})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Requested Quantity"}),(0,n.jsx)("p",{className:"font-medium",children:ea.requestedQty})]})]}),(void 0!==ea.currentRw||void 0!==ea.requestedRw)&&(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Current RW/NG"}),(0,n.jsxs)("p",{children:["RW: ",null!==(R=ea.currentRw)&&void 0!==R?R:0,", NG: ",null!==(C=ea.currentNg)&&void 0!==C?C:0]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Requested RW/NG"}),(0,n.jsxs)("p",{children:["RW: ",null!==(M=ea.requestedRw)&&void 0!==M?M:0,", NG: ",null!==(T=ea.requestedNg)&&void 0!==T?T:0]})]})]}),(null===(D=ea.operationCode)||void 0===D?void 0:D.toLowerCase())==="op10"&&(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Current Replacement (RP)"}),(0,n.jsx)("p",{className:"text-blue-600 dark:text-blue-400 font-medium",children:null!==(_=null!==(S=ea.currentReplacement)&&void 0!==S?S:ea.currentQty)&&void 0!==_?_:0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Requested Replacement (RP)"}),(0,n.jsx)("p",{className:"text-blue-600 dark:text-blue-400 font-medium",children:null!==(Z=null!==(P=ea.requestedReplacement)&&void 0!==P?P:ea.requestedQty)&&void 0!==Z?Z:0})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Reason for Edit"}),(0,n.jsx)("p",{className:"text-sm mt-1 p-2 bg-muted rounded-md",children:ea.reason})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Date Requested"}),(0,n.jsx)("p",{children:(0,c.ZP)(new Date(ea.createdAt),"mmm d, yyyy h:MM TT")})]}),ea.resolvedAt&&(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Date Resolved"}),(0,n.jsx)("p",{children:(0,c.ZP)(new Date(ea.resolvedAt),"mmm d, yyyy h:MM TT")})]})]}),"pending"!==ea.status&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Resolved By"}),(0,n.jsx)("p",{children:(null===(q=ea.resolvedBy)||void 0===q?void 0:q.name)||"N/A"})]}),ea.resolutionNote&&(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{className:"text-xs text-muted-foreground",children:"Resolution Notes"}),(0,n.jsx)("p",{className:"text-sm mt-1 p-2 bg-muted rounded-md",children:ea.resolutionNote})]})]}),!et&&"pending"===ea.status&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{htmlFor:"resolution-type",children:"Resolution"}),(0,n.jsxs)(g.Ph,{value:el,onValueChange:e=>ec(e),disabled:ef,children:[(0,n.jsx)(g.i4,{id:"resolution-type",children:(0,n.jsx)(g.ki,{placeholder:"Select resolution"})}),(0,n.jsxs)(g.Bw,{children:[(0,n.jsx)(g.Ql,{value:"approved",children:"Approve"}),(0,n.jsx)(g.Ql,{value:"rejected",children:"Reject"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(j._,{htmlFor:"notes",children:"Notes"}),(0,n.jsx)(N.g,{id:"notes",placeholder:"Add any notes about your decision",value:eu,onChange:e=>em(e.target.value),disabled:ef,className:"h-20"})]})]})]}),(0,n.jsxs)(x.cN,{children:[(0,n.jsx)(p.z,{variant:"outline",onClick:()=>ei(!1),disabled:ef,children:et?"Close":"Cancel"}),!et&&(0,n.jsx)(p.z,{onClick:ev,disabled:ef,variant:"approved"===el?"default":"destructive",children:ef?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.$,{className:"mr-2 h-4 w-4"}),"Processing..."]}):"approved"===el?"Approve Request":"Reject Request"})]})]})})]})})},49102:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var n=r(67294),s=r(75320),a=r(85893),d=n.forwardRef((e,t)=>(0,a.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));d.displayName="Label";var o=d},1280:function(e,t,r){"use strict";r.d(t,{ZP:function(){return d}});var n=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,s=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,a=/[^-+\dA-Z]/g;function d(e,t,r,s){if(1!=arguments.length||"string"!=typeof e||/\d/.test(e)||(t=e,e=void 0),(e=e||0===e?e:new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var a=(t=String(o[t]||t||o.default)).slice(0,4);("UTC:"===a||"GMT:"===a)&&(t=t.slice(4),r=!0,"GMT:"===a&&(s=!0));var d=function(){return r?"getUTC":"get"},p=function(){return e[d()+"Date"]()},h=function(){return e[d()+"Day"]()},x=function(){return e[d()+"Month"]()},g=function(){return e[d()+"FullYear"]()},y=function(){return e[d()+"Hours"]()},v=function(){return e[d()+"Minutes"]()},j=function(){return e[d()+"Seconds"]()},N=function(){return e[d()+"Milliseconds"]()},b=function(){return r?0:e.getTimezoneOffset()},w=function(){return u(e)},D={d:function(){return p()},dd:function(){return l(p())},ddd:function(){return i.dayNames[h()]},DDD:function(){return c({y:g(),m:x(),d:p(),_:d(),dayName:i.dayNames[h()],short:!0})},dddd:function(){return i.dayNames[h()+7]},DDDD:function(){return c({y:g(),m:x(),d:p(),_:d(),dayName:i.dayNames[h()+7]})},m:function(){return x()+1},mm:function(){return l(x()+1)},mmm:function(){return i.monthNames[x()]},mmmm:function(){return i.monthNames[x()+12]},yy:function(){return String(g()).slice(2)},yyyy:function(){return l(g(),4)},h:function(){return y()%12||12},hh:function(){return l(y()%12||12)},H:function(){return y()},HH:function(){return l(y())},M:function(){return v()},MM:function(){return l(v())},s:function(){return j()},ss:function(){return l(j())},l:function(){return l(N(),3)},L:function(){return l(Math.floor(N()/10))},t:function(){return 12>y()?i.timeNames[0]:i.timeNames[1]},tt:function(){return 12>y()?i.timeNames[2]:i.timeNames[3]},T:function(){return 12>y()?i.timeNames[4]:i.timeNames[5]},TT:function(){return 12>y()?i.timeNames[6]:i.timeNames[7]},Z:function(){return s?"GMT":r?"UTC":f(e)},o:function(){return(b()>0?"-":"+")+l(100*Math.floor(Math.abs(b())/60)+Math.abs(b())%60,4)},p:function(){return(b()>0?"-":"+")+l(Math.floor(Math.abs(b())/60),2)+":"+l(Math.floor(Math.abs(b())%60),2)},S:function(){return["th","st","nd","rd"][p()%10>3?0:(p()%100-p()%10!=10)*p()%10]},W:function(){return w()},WW:function(){return l(w())},N:function(){return m(e)}};return t.replace(n,function(e){return e in D?D[e]():e.slice(1,e.length-1)})}var o={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},i={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(e).padStart(t,"0")},c=function(e){var t=e.y,r=e.m,n=e.d,s=e._,a=e.dayName,d=e.short,o=void 0!==d&&d,i=new Date,l=new Date;l.setDate(l[s+"Date"]()-1);var c=new Date;return(c.setDate(c[s+"Date"]()+1),i[s+"FullYear"]()===t&&i[s+"Month"]()===r&&i[s+"Date"]()===n)?o?"Tdy":"Today":l[s+"FullYear"]()===t&&l[s+"Month"]()===r&&l[s+"Date"]()===n?o?"Ysd":"Yesterday":c[s+"FullYear"]()===t&&c[s+"Month"]()===r&&c[s+"Date"]()===n?o?"Tmw":"Tomorrow":a},u=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);var n=t.getTimezoneOffset()-r.getTimezoneOffset();return t.setHours(t.getHours()-n),1+Math.floor((t-r)/(864e5*7))},m=function(e){var t=e.getDay();return 0===t&&(t=7),t},f=function(e){return(String(e).match(s)||[""]).pop().replace(a,"").replace(/GMT\+0000/g,"UTC")}}},function(e){e.O(0,[192,664,847,341,164,87,888,774,179],function(){return e(e.s=41518)}),_N_E=e.O()}]);